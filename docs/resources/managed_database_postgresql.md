---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "upcloud_managed_database_postgresql Resource - terraform-provider-upcloud"
subcategory: ""
description: |-
  This resource represents PostgreSQL managed database
---

# upcloud_managed_database_postgresql (Resource)

This resource represents PostgreSQL managed database

## Example Usage

```terraform
# Minimal config
resource "upcloud_managed_database_postgresql" "example_1" {
  name  = "postgres-1"
  plan  = "1x1xCPU-2GB-25GB"
  title = "postgres"
  zone  = "fi-hel1"
}

# Service with custom properties
resource "upcloud_managed_database_postgresql" "example_2" {
  name  = "postgres-2"
  plan  = "1x1xCPU-2GB-25GB"
  title = "postgres"
  zone  = "fi-hel1"
  properties {
    timezone       = "Europe/Helsinki"
    admin_username = "admin"
    admin_password = "<ADMIN_PASSWORD>"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **name** (String) Name of the service. The name is used as a prefix for the logical hostname. Must be unique within an account
- **plan** (String) Service plan to use. This determines how much resources the instance will have
- **zone** (String) Zone where the instance resides

### Optional

- **id** (String) The ID of this resource.
- **maintenance_window_dow** (String) Maintenance window day of week. Lower case weekday name (monday, tuesday, ...)
- **maintenance_window_time** (String) Maintenance window UTC time in hh:mm:ss format
- **powered** (Boolean) The administrative power state of the service
- **properties** (Block List, Max: 1) Database Engine properties for PostgreSQL (see [below for nested schema](#nestedblock--properties))
- **title** (String) Title of a managed database instance

### Read-Only

- **components** (List of Object) Service component information (see [below for nested schema](#nestedatt--components))
- **node_states** (List of Object) Information about nodes providing the managed service (see [below for nested schema](#nestedatt--node_states))
- **primary_database** (String) Primary database name
- **service_host** (String) Hostname to the service instance
- **service_password** (String, Sensitive) Primary username's password to the service instance
- **service_port** (String) Port to the service instance
- **service_uri** (String, Sensitive) URI to the service instance
- **service_username** (String) Primary username to the service instance
- **sslmode** (String) SSL Connection Mode for PostgreSQL
- **state** (String) State of the service
- **type** (String) Type of the service

<a id="nestedblock--properties"></a>
### Nested Schema for `properties`

Optional:

- **admin_password** (String, Sensitive) Custom password for admin user. Defaults to random string. This must be set only when a new service is being created.
- **admin_username** (String) Custom username for admin user. This must be set only when a new service is being created.
- **automatic_utility_network_ip_filter** (Boolean) Automatic utility network IP Filter
- **autovacuum_analyze_scale_factor** (Number) autovacuum_analyze_scale_factor
- **autovacuum_analyze_threshold** (Number) autovacuum_analyze_threshold
- **autovacuum_freeze_max_age** (Number) autovacuum_freeze_max_age
- **autovacuum_max_workers** (Number) autovacuum_max_workers
- **autovacuum_naptime** (Number) autovacuum_naptime
- **autovacuum_vacuum_cost_delay** (Number) autovacuum_vacuum_cost_delay
- **autovacuum_vacuum_cost_limit** (Number) autovacuum_vacuum_cost_limit
- **autovacuum_vacuum_scale_factor** (Number) autovacuum_vacuum_scale_factor
- **autovacuum_vacuum_threshold** (Number) autovacuum_vacuum_threshold
- **backup_hour** (Number) The hour of day (in UTC) when backup for the service is started. New backup is only started if previous backup has already completed.
- **backup_minute** (Number) The minute of an hour when backup for the service is started. New backup is only started if previous backup has already completed.
- **bgwriter_delay** (Number) bgwriter_delay
- **bgwriter_flush_after** (Number) bgwriter_flush_after
- **bgwriter_lru_maxpages** (Number) bgwriter_lru_maxpages
- **bgwriter_lru_multiplier** (Number) bgwriter_lru_multiplier
- **deadlock_timeout** (Number) deadlock_timeout
- **idle_in_transaction_session_timeout** (Number) idle_in_transaction_session_timeout
- **ip_filter** (List of String) IP filter
- **jit** (Boolean) jit
- **log_autovacuum_min_duration** (Number) log_autovacuum_min_duration
- **log_error_verbosity** (String) log_error_verbosity
- **log_line_prefix** (String) log_line_prefix
- **log_min_duration_statement** (Number) log_min_duration_statement
- **max_files_per_process** (Number) max_files_per_process
- **max_locks_per_transaction** (Number) max_locks_per_transaction
- **max_logical_replication_workers** (Number) max_logical_replication_workers
- **max_parallel_workers** (Number) max_parallel_workers
- **max_parallel_workers_per_gather** (Number) max_parallel_workers_per_gather
- **max_pred_locks_per_transaction** (Number) max_pred_locks_per_transaction
- **max_prepared_transactions** (Number) max_prepared_transactions
- **max_replication_slots** (Number) max_replication_slots
- **max_stack_depth** (Number) max_stack_depth
- **max_standby_archive_delay** (Number) max_standby_archive_delay
- **max_standby_streaming_delay** (Number) max_standby_streaming_delay
- **max_wal_senders** (Number) max_wal_senders
- **max_worker_processes** (Number) max_worker_processes
- **migration** (Block List, Max: 1) Migrate data from existing server (see [below for nested schema](#nestedblock--properties--migration))
- **pg_partman_bgw_interval** (Number) pg_partman_bgw.interval
- **pg_partman_bgw_role** (String) pg_partman_bgw.role
- **pg_read_replica** (Boolean) Should the service which is being forked be a read replica
- **pg_service_to_fork_from** (String) Name of the PG Service from which to fork (deprecated, use service_to_fork_from). This has effect only when a new service is being created.
- **pg_stat_statements_track** (String) pg_stat_statements.track
- **pgbouncer** (Block List, Max: 1) PGBouncer connection pooling settings (see [below for nested schema](#nestedblock--properties--pgbouncer))
- **pglookout** (Block List, Max: 1) PGLookout settings (see [below for nested schema](#nestedblock--properties--pglookout))
- **public_access** (Boolean) Public Access
- **shared_buffers_percentage** (Number) shared_buffers_percentage
- **synchronous_replication** (String) Synchronous replication type. Note that the service plan also needs to support synchronous replication.
- **temp_file_limit** (Number) temp_file_limit
- **timescaledb** (Block List, Max: 1) TimescaleDB extension configuration values (see [below for nested schema](#nestedblock--properties--timescaledb))
- **timezone** (String) timezone
- **track_activity_query_size** (Number) track_activity_query_size
- **track_commit_timestamp** (String) track_commit_timestamp
- **track_functions** (String) track_functions
- **track_io_timing** (String) track_io_timing
- **variant** (String) Variant of the PostgreSQL service, may affect the features that are exposed by default
- **version** (String) PostgreSQL major version
- **wal_sender_timeout** (Number) wal_sender_timeout
- **wal_writer_delay** (Number) wal_writer_delay
- **work_mem** (Number) work_mem

<a id="nestedblock--properties--migration"></a>
### Nested Schema for `properties.migration`

Optional:

- **dbname** (String) Database name for bootstrapping the initial connection
- **host** (String) Hostname or IP address of the server where to migrate data from
- **ignore_dbs** (String) Comma-separated list of databases, which should be ignored during migration (supported by MySQL only at the moment)
- **password** (String, Sensitive) Password for authentication with the server where to migrate data from
- **port** (Number) Port number of the server where to migrate data from
- **ssl** (Boolean) The server where to migrate data from is secured with SSL
- **username** (String) User name for authentication with the server where to migrate data from


<a id="nestedblock--properties--pgbouncer"></a>
### Nested Schema for `properties.pgbouncer`

Optional:

- **autodb_idle_timeout** (Number) If the automatically created database pools have been unused this many seconds, they are freed. If 0 then timeout is disabled. [seconds]
- **autodb_max_db_connections** (Number) Do not allow more than this many server connections per database (regardless of user). Setting it to 0 means unlimited.
- **autodb_pool_mode** (String) PGBouncer pool mode
- **autodb_pool_size** (Number) If non-zero then create automatically a pool of that size per user when a pool doesn't exist.
- **ignore_startup_parameters** (List of String) List of parameters to ignore when given in startup packet
- **min_pool_size** (Number) Add more server connections to pool if below this number. Improves behavior when usual load comes suddenly back after period of total inactivity. The value is effectively capped at the pool size.
- **server_idle_timeout** (Number) If a server connection has been idle more than this many seconds it will be dropped. If 0 then timeout is disabled. [seconds]
- **server_lifetime** (Number) The pooler will close an unused server connection that has been connected longer than this. [seconds]
- **server_reset_query_always** (Boolean) Run server_reset_query (DISCARD ALL) in all pooling modes


<a id="nestedblock--properties--pglookout"></a>
### Nested Schema for `properties.pglookout`

Optional:

- **max_failover_replication_time_lag** (Number) max_failover_replication_time_lag


<a id="nestedblock--properties--timescaledb"></a>
### Nested Schema for `properties.timescaledb`

Optional:

- **max_background_workers** (Number) timescaledb.max_background_workers



<a id="nestedatt--components"></a>
### Nested Schema for `components`

Read-Only:

- **component** (String)
- **host** (String)
- **port** (Number)
- **route** (String)
- **usage** (String)


<a id="nestedatt--node_states"></a>
### Nested Schema for `node_states`

Read-Only:

- **name** (String)
- **role** (String)
- **state** (String)


